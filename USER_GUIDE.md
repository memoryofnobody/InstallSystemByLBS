# 订单地图管理系统 - 用户使用指南

## 目录
1. [登录系统](#登录系统)
2. [管理员操作](#管理员操作)
3. [买家操作](#买家操作)
4. [供应商操作](#供应商操作)
5. [安装工程师操作](#安装工程师操作)
6. [常见问题](#常见问题)

---

## 登录系统

### 首次登录

1. 打开浏览器,访问系统登录页面: `http://your-domain/login.html`

2. 使用默认管理员账号登录:
   - **用户名**: `admin`
   - **密码**: `admin`

3. **重要**: 首次登录后请立即修改密码

### 用户类型说明

系统支持4种用户类型:

| 用户类型 | 权限说明 |
|---------|---------|
| 管理员 (admin) | 拥有所有权限,可以管理用户、创建订单、发货管理、安装管理 |
| 买家 (buyer) | 可以创建订单,查看自己的订单 |
| 供应商 (supplier) | 可以查看所有订单,录入发货和收货信息 |
| 安装工程师 (engineer) | 可以查看所有订单,录入安装详情 |

---

## 管理员操作

### 1. 用户管理

#### 创建新用户

1. 登录后点击顶部"**用户管理**"标签
2. 点击"**创建新用户**"按钮
3. 填写用户信息:
   - **用户名**: 必填,用于登录
   - **密码**: 必填,建议使用强密码
   - **用户类型**: 必填,选择买家/供应商/安装工程师/管理员
   - **真实姓名**: 选填
   - **电话**: 选填
   - **公司**: 选填
4. 点击"**创建**"按钮

#### 删除用户

1. 在用户列表中找到要删除的用户
2. 点击"**删除**"按钮
3. 确认删除操作

> ⚠️ **注意**: 不能删除当前登录的用户

### 2. 管理员可执行所有其他角色的操作

管理员拥有系统所有功能的访问权限,可以执行买家、供应商、安装工程师的所有操作。

---

## 买家操作

### 创建订单

#### 步骤1: 打开创建订单窗口

1. 登录系统后,默认显示"**地图视图**"
2. 点击右上角"**创建订单**"按钮

#### 步骤2: 在地图上选择安装位置

1. 在弹出的订单创建窗口中,找到地图区域
2. **方法一**: 直接在地图上点击,选择安装位置
3. **方法二**: 点击地图上的定位按钮,使用当前位置
4. 地图会自动显示选中位置的地址,并标记在地图上

#### 步骤3: 填写订单信息

**基本信息** (必填):
- **单位名称**: 填写购买单位的名称
- **购买数量**: 填写购买的产品数量
- **安装数量**: 填写需要安装的数量
- **安装地址**: 通过地图点击自动填入

**联系信息** (选填):
- **下单人**: 下单人姓名
- **下单人联系方式**: 手机号码
- **收货人**: 收货人姓名
- **收货地址**: 收货地址
- **收货人联系方式**: 收货人电话
- **安装对接联系人**: 现场安装对接人
- **安装联系方式**: 安装对接人电话

#### 步骤4: 添加安装需求清单

1. 在"**安装需求清单**"区域,系统默认提供2行输入框
2. 填写每行的信息:
   - **车牌号**: 如 京A12345
   - **终端编号**: 设备终端编号
3. 需要更多行时,点击"**添加**"按钮
4. 不需要的行,点击"**删除**"按钮移除

#### 步骤5: 提交订单

1. 检查所有信息是否正确
2. 在"**备注**"栏填写额外说明(可选)
3. 点击"**提交**"按钮
4. 提交成功后,订单会显示在列表和地图上

### 查看订单

#### 地图视图查看

1. 点击顶部"**地图视图**"标签
2. 地图上会显示所有订单的标记点
3. 标记上方显示: 单位数量、总数量、已安装数量
4. 点击标记点,查看该位置的订单详情

#### 列表视图查看

1. 点击顶部"**列表视图**"标签
2. 表格显示所有订单信息
3. 点击"**查看详情**"按钮,查看订单完整信息

#### 筛选订单

使用顶部筛选栏:
- **单位名称**: 输入单位名称模糊搜索
- **发货状态**: 选择已发货/未发货
- **收货状态**: 选择已收货/未收货
- **安装状态**: 选择全部安装/部分安装/未安装

点击"**搜索**"按钮应用筛选条件。

### 导出数据

在订单列表中,点击订单行的"**导出**"按钮,下载CSV格式的安装清单。

---

## 供应商操作

### 查看订单

供应商可以查看所有买家的订单:

1. 登录系统
2. 在"**地图视图**"或"**列表视图**"查看所有订单
3. 使用筛选功能快速查找订单

### 录入发货信息

#### 步骤1: 选择订单

1. 在"**列表视图**"中找到需要发货的订单
2. 点击"**发货**"按钮

#### 步骤2: 填写发货信息

在弹出的发货窗口中填写:

- **是否发货**: 选择"已发货"或"未发货"
- **物流单号**: 填写快递/物流单号
- **是否收货**: 选择"已收货"或"未收货"
- **收货数量**: 填写实际收货数量

#### 步骤3: 保存

1. 检查信息是否正确
2. 点击"**保存**"按钮
3. 保存成功后,订单状态会自动更新

### 查看安装进度

1. 在订单列表的"**安装情况**"列,查看已安装数量/总数量
2. 点击"**查看详情**",查看每个设备的安装状态
3. 在"**安装详情**"表格中查看:
   - 车牌号
   - 终端编号
   - 设备序列号
   - SIM卡序列号
   - 安装工程师
   - 安装时间
   - 安装状态

---

## 安装工程师操作

### 查看待安装订单

1. 登录系统
2. 在地图或列表视图查看所有订单
3. 使用"**安装状态**"筛选,选择"未安装"或"部分安装"
4. 查看订单的安装地址和联系人信息

### 录入安装信息

#### 步骤1: 选择订单

1. 在"**列表视图**"中找到需要安装的订单
2. 点击"**安装**"按钮

#### 步骤2: 录入安装详情

在弹出的安装窗口中:

1. 系统会列出该订单的所有安装需求清单
2. 每一行显示:
   - **车牌号**: 只读,显示需要安装的车牌
   - **终端编号**: 只读,显示终端编号
   - **设备序列号**: 可编辑,填写实际安装的设备序列号
   - **SIM卡序列号**: 可编辑,填写SIM卡序列号
   - **已安装**: 勾选框,完成安装后勾选

3. 逐行填写安装信息

#### 步骤3: 保存安装记录

1. 检查所有信息是否正确
2. 点击"**保存**"按钮
3. 系统会自动记录:
   - 安装时间(当前时间)
   - 安装工程师(当前登录用户)

#### 后续更新

- 可以多次打开安装窗口更新信息
- 已填写的信息会保留显示
- 可以继续勾选更多"已安装"项

### 查看安装历史

1. 点击订单的"**查看详情**"按钮
2. 在"**安装详情**"区域查看:
   - 所有已安装设备的详细信息
   - 安装时间和安装工程师
   - 未安装设备的待办列表

---

## 地图功能详解

### 地图标记说明

- **单个订单标记**: 显示单个订单位置
- **聚合标记**: 多个订单在同一区域时,自动聚合显示数量
- **标记标签**: 鼠标悬停在标记上,显示简要信息

### 地图操作

1. **缩放地图**:
   - 鼠标滚轮: 放大/缩小
   - 左侧控件: 点击+/-按钮
   - 双击地图: 放大

2. **移动地图**:
   - 鼠标拖拽地图移动视角

3. **查看标记详情**:
   - 点击地图标记,弹出信息窗口
   - 显示该位置的所有订单
   - 点击订单的"查看详情"链接,打开订单详情窗口

4. **点聚合效果**:
   - 缩小地图时,临近的标记会自动聚合成一个
   - 放大地图时,聚合点会自动分散成单个标记
   - 点击聚合标记,地图会放大该区域

### 地图筛选

1. 使用顶部筛选栏设置条件
2. 点击"**搜索**"按钮
3. 地图会只显示符合条件的订单标记

---

## 数据导出

### 导出单个订单

1. 在订单列表中找到要导出的订单
2. 点击该订单行的"**导出**"按钮
3. 浏览器会自动下载CSV文件

### 导出格式说明

导出的CSV文件包含以下列:

| 列名 | 说明 |
|-----|------|
| 单位名称 | 订单单位名称 |
| 安装地址 | 安装位置地址 |
| 车牌号 | 车辆车牌号 |
| 终端编号 | 设备终端编号 |
| 设备序列号 | 实际安装的设备序号(已安装时显示) |
| SIM卡序列号 | SIM卡序号(已安装时显示) |
| 安装工程师 | 执行安装的工程师(已安装时显示) |
| 安装时间 | 完成安装的时间(已安装时显示) |
| 安装状态 | 已安装/未安装 |

### 用Excel打开CSV

1. 打开Microsoft Excel
2. 点击"文件" -> "打开"
3. 选择下载的CSV文件
4. Excel会自动识别并显示表格数据

---

## 常见问题

### Q1: 忘记密码怎么办?

**解决方法**:
1. 联系系统管理员重置密码
2. 管理员可以在"用户管理"中删除用户后重新创建

### Q2: 地图标记不显示?

**可能原因**:
1. 订单没有设置安装地址和坐标
2. 筛选条件过滤了所有订单
3. 百度地图API密钥配置错误

**解决方法**:
1. 检查订单是否有地理坐标
2. 清除筛选条件,点击"搜索"
3. 按F12打开浏览器控制台,查看是否有API错误

### Q3: 如何批量创建用户?

**解决方法**:
当前版本需要逐个创建用户。如需批量导入,可以:
1. 直接在数据库中操作users表
2. 联系技术人员开发批量导入功能

### Q4: 订单创建后能否修改?

**当前限制**:
- 买家创建订单后,不能直接修改订单基本信息
- 供应商可以修改发货信息
- 安装工程师可以修改安装信息

**解决方法**:
- 联系管理员帮助修改
- 管理员可以通过数据库直接修改

### Q5: 导出的CSV文件乱码怎么办?

**解决方法**:
1. 使用Excel打开时选择"数据" -> "从文本导入"
2. 选择文件编码为"UTF-8"
3. 或使用记事本打开,另存为时选择ANSI编码

### Q6: 地图定位不准确?

**可能原因**:
1. 浏览器没有授予定位权限
2. 设备没有开启GPS

**解决方法**:
1. 在浏览器设置中允许网站访问位置
2. 手动在地图上点击选择正确位置

### Q7: 多个用户同时操作会冲突吗?

**回答**:
不会冲突。系统支持多用户并发操作:
- 不同用户可以同时查看、创建订单
- 对同一订单的修改,按最后保存时间为准
- 建议安装工程师录入安装信息时,避免重复操作同一订单

### Q8: 系统支持手机访问吗?

**回答**:
支持。系统采用响应式设计:
- 手机浏览器可以正常访问
- 界面会自动适配手机屏幕
- 地图功能完全支持触摸操作

### Q9: 如何联系技术支持?

**联系方式**:
- 查看系统管理员联系方式
- 提交系统问题反馈
- 查阅项目文档和说明

---

## 操作技巧

### 提高效率的技巧

1. **使用筛选功能**: 快速找到需要处理的订单
2. **地图聚焦**: 点击聚合标记快速定位区域
3. **批量操作**: 安装工程师可以一次性录入多个设备的安装信息
4. **快捷键**: 
   - Ctrl+F: 浏览器内页面搜索
   - F5: 刷新页面数据
5. **导出备份**: 定期导出重要订单数据作为备份

### 最佳实践

1. **订单创建**: 尽量填写完整的联系信息,方便后续沟通
2. **安装需求**: 车牌号格式统一,方便查找
3. **及时更新**: 发货后及时录入物流信息
4. **完整记录**: 安装完成后立即录入设备序列号
5. **定期检查**: 定期查看订单状态,确保流程顺畅

---

## 附录: 订单状态流转

```
订单创建(买家)
    ↓
等待发货
    ↓
供应商录入发货信息
    ↓
已发货 → 等待收货
    ↓
客户签收
    ↓
供应商录入收货信息
    ↓
已收货 → 等待安装
    ↓
安装工程师现场安装
    ↓
安装工程师录入安装信息
    ↓
安装完成
```

---

**祝您使用愉快!** 🎉
